# Copyright (c) Jupyter Development Team.
# Distributed under the terms of the Modified BSD License.

# JupyterHub docker-compose configuration file
version: "2"

services:
  hub:
    build:
      context: .
      dockerfile: Dockerfile.jupyterhub
    image: kooplexbinderhub
    container_name: binderhub
    volumes:
      # Bind Docker binary from host machine so we can invoke Docker commands
      # from inside container
      #- "/usr/local/bin/docker:/usr/local/bin/docker:ro"
      # Bind Docker socket on the host so we can connect to the daemon from
      # within the container
      - "/var/run/docker.sock:/var/run/docker.sock:rw"
    ports:
      - "8000:443"
    networks:
      - hubnet
    environment:
      # All containers will join this network
      DOCKER_NETWORK_NAME: kooplexbinder_hubnet 
      # JupyterHub will spawn this Notebook image for users
    command: >
      jupyterhub -f /srv/jupyterhub/jupyterhub_config.py

networks:
  hubnet:
    driver: bridge
